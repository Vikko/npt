/* clear arrays */

heart_rate_data = [];
sweat_data = [];
muscle_data = [];
accelero_data = [];
gyro_data = [];
peac_data = [];
post_data = [];
resp_data = [];

/* Heart rate */
<% if @hr_data.present? %>
	<% i = 0 %>
	<% @hr_data.each do |data_entry| %>
		heart_rate_data.push([<%= i %>, <%= data_entry%>]);
		<% i += 1 %>
	<% end %>
<% end %>
if (delay <= 0) {
	// next = bpm_rate_data.length;
	current_bpm = <%= @bpm.present? ? @bpm.last : 0.0 %>;
	current_bpm = current_bpm.toFixed(1);
	// bpm_rate_data.push([next, current_bpm]);
	delay = 25;
	draw_bpmrate();
	$(".bpm-value").html(current_bpm);
}
delay--;

/* Sweat */
<% if @sw_data.present? %>
	<% i = 0 %>
	// $("#sweat").html("<%#= j(render :partial => 'sweat') %>");
	<% @sw_data.each do |data_entry| %>
		sweat_data.push([<%= i %>, <%= data_entry%>]);
		<% i += 1 %>
	<% end %>
<% end %>

/* Muscle tension */
<% if @mt_data.present? %>
	<% i = 0 %>
	// $("#muscle_tension").html("<%#= j(render :partial => 'muscle_tension') %>");
	<% @mt_data.each do |data_entry| %>
		muscle_data.push([<%= i %>, <%= data_entry%>]);
		<% i += 1 %>
	<% end %>
<% end %>

/* Accelerometer */
<% if @accel_data.present? %>
	<% i = 0 %>
	// $("#accelerometer").html("<%#= j(render :partial => 'accelerometer') %>");
	<% @accel_data.each do |data_entry| %>
		accelero_data.push([<%= i %>, <%= data_entry%>]);
		<% i += 1 %>
	<% end %>
<% end %>

/* Gyroscope */
<% if @gyro_data.present? %>
	<% i = 0 %>
	// $("#gyroscope").html("<%#= j(render :partial => 'gyroscope') %>");
	<% @gyro_data.each do |data_entry| %>
		gyro_data.push([<%= i %>, <%= data_entry%>]);
		<% i += 1 %>
	<% end %>
<% end %>

/* Peak acceleration */
<% if @peak_accel_data.present? %>
	<% i = 0 %>
	// $("#gyroscope").html("<%#= j(render :partial => 'gyroscope') %>");
	<% @peak_accel_data.each do |data_entry| %>
		peac_data.push([<%= i %>, <%= data_entry%>]);
		<% i += 1 %>
	<% end %>
<% end %>

/* Posture */
<% if @posture_data.present? %>
	<% i = 0 %>
	// $("#gyroscope").html("<%#= j(render :partial => 'gyroscope') %>");
	<% @posture_data.each do |data_entry| %>
		post_data.push([<%= i %>, <%= data_entry%>]);
		<% i += 1 %>
	<% end %>
<% end %>

/* Posture */
<% if @respiration_data.present? %>
	<% i = 0 %>
	// $("#gyroscope").html("<%#= j(render :partial => 'gyroscope') %>");
	<% @respiration_data.each do |data_entry| %>
		resp_data.push([<%= i %>, <%= data_entry%>]);
		<% i += 1 %>
	<% end %>
<% end %>

/* Geolocation */
<% if @latitude.present? && @longitude.present? %>
	$("#geolocation").html("<%= j(render :partial => 'map') %>")
<% end %>

