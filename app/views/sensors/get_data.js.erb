// $("#data").html("<%= escape_javascript(render :partial => 'data') %>");
heart_rate_data = []
<% if @hr_data.present? %>
var i = 0;
	<% @hr_data.each do |data_entry| %>
		heart_rate_data.push([i, <%= data_entry%>]);
		i++;
	<% end %>
<% end %>
<% if @latitude.present? && @longitude.present? %>
	$("#location").html("<%= j(render :partial => 'map') %>")
<% end %>

if (delay <= 0) {
	next = bpm_rate_data.length;
	current_bpm = <%= @hr_data.present? ? @hr_data.last[5] : 0.0 %>;
	current_bpm = current_bpm.toFixed(1);
	bpm_rate_data.push([next, current_bpm]);
	delay = 25;
	draw_bpmrate();
	$(".bpm-value").html(current_bpm);
}
delay--;